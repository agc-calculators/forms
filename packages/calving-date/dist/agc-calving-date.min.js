var CalvingDate=function(a){"use strict";var b=dates={addDays:function(a,b){"string"==typeof a&&(a=new Date(a));var c=new Date(a),d=a.getDate()+parseInt(b);return c.setDate(d),c},daysBetween:function(a,b){var c=Math.round,d=new Date(a),e=new Date(b);return c((d.getTime()-e.getTime())/86400000)},format:function(a,b){var c=new Date(a),d=c.getDate(),e=c.getMonth()+1,f=c.getFullYear(),g=("0"+e).slice(-2),h=("0"+d).slice(-2),i={YYYY:f,yyyy:f,MM:g,mm:g,DD:h,dd:h},j="";if(-1!==b.indexOf("/"))j="/";else if(-1!==b.indexOf("-"))j="-";else throw new Error("Invalid date mask!");var k=b.split(j),l=k.reduce(function(a,b){return a=a+(i[b]||b)+j,a},"");return l.slice(0,l.length-1)},parse:function(a){return"string"==typeof a&&(a=new Date(a)),a}};validation={validate:function(a,b){let c=a.querySelector(`[name="${b}"]`),d=a.querySelector(`[data-validates="${b}"`);return c.checkValidity()?(c.className=c.className.replace(" invalid",""),d.style.display="none",!0):(-1===c.className.indexOf("invalid")&&(c.className+=" invalid"),d.style.display="block",!1)}};return a.calculate=a=>new Promise((c,d)=>{let e={package:"calving-date",properties:{...a},values:{}};if(!a.breedingDate)return void d({package:"calving-date",scope:"#/properties/breedingDate",message:"Breeding date is required",i18n:"properties.breeding-date.required"});if(!a.gestationPeriod)return void d({package:"calving-date",scope:"#/properties/gestationPeriod",message:"Gestation period is required",i18n:"properties.gestation-period.required"});let f=b.parse(a.breedingDate);e.values.breedingDate=f;let g=parseInt(a.gestationPeriod);e.values.gestationPeriod=g,e.values.calvingDate=b.parse(b.addDays(f,g)),e.values.calvingDate_mmddyyyy=b.format(e.values.calvingDate,"MM/DD/YYYY"),e.calculated=new Date,c(e)}),a.schema={type:"object",properties:{breedingDate:{type:"string",format:"date"},gestationPeriod:{type:"string",enum:["279","280","281","282","283","284","285","286","287"]}},required:["breedingDate","gestationPeriod"]},a.uischema={type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/breedingDate"},{type:"Control",scope:"#/properties/gestationPeriod"}]},a}({});
